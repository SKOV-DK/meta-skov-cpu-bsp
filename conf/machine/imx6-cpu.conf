#@TYPE: Machine
#@NAME: IMX6
#@DESCRIPTION: Common machine configuration for all IMX6 variants

include conf/machine/include/soc-family.inc

MACHINEOVERRIDES .= ":imx6-cpu"

MACHINE_EXTRA_RRECOMMENDS = " kernel-modules kernel-devicetree \
                              firmware-imx-vpu-imx6d firmware-imx-vpu-imx6q \
"

EXTRA_IMAGECMD_squashfs = "-comp lzo -b 128K -no-xattrs"
EXTRA_IMAGEDEPENDS += "virtual/bootloader"

DEFAULTTUNE = "cortexa9hf-neon"
include conf/machine/include/tune-cortexa9.inc

IMAGE_FSTYPES += "tar.bz2 squashfs"

SERIAL_CONSOLES = "115200;ttymxc1"

PREFERRED_PROVIDER_virtual/egl_mx6 ?= "mesa"
PREFERRED_PROVIDER_virtual/libgl_mx6 ?= "mesa"
PREFERRED_PROVIDER_virtual/libgles1_mx6 ?= "mesa"
PREFERRED_PROVIDER_virtual/libgles2_mx6 ?= "mesa"

PREFERRED_PROVIDER_virtual/bootloader ?= "barebox"

PREFERRED_PROVIDER_virtual/kernel ?= "linux-skov"

BAREBOX_IMAGE = "barebox-skov-imx6.img"

KERNEL_IMAGETYPE = "zImage"
KERNEL_DEVICETREE = "\
 imx6dl-skov-revc-lt2.dtb \
 imx6dl-skov-revc-lt6.dtb \
 imx6q-skov-revc-lt2.dtb \
 imx6q-skov-revc-lt6.dtb \
 "

MACHINE_FEATURES = "usbgadget usbhost vfat touchscreen serial rtc"

SOC_FAMILY = "mx6"
MACHINE_SOCARCH = "${TUNE_PKGARCH}-mx6"
MACHINE_ARCH_FILTER = "virtual/kernel"
PACKAGE_EXTRA_ARCHS_append = " ${MACHINE_SOCARCH}"
