From: Michael Grzeschik <m.grzeschik@pengutronix.de>
Date: Thu, 16 Jul 2020 17:37:39 +0200
Subject: [PATCH] net: phy: micrel: add dummy interrupt functions, which are
 handled by dsa

Signed-off-by: Michael Grzeschik <m.grzeschik@pengutronix.de>
---
 drivers/net/phy/micrel.c | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

diff --git a/drivers/net/phy/micrel.c b/drivers/net/phy/micrel.c
index 663c68ed6ef9..99333c3c472e 100644
--- a/drivers/net/phy/micrel.c
+++ b/drivers/net/phy/micrel.c
@@ -1170,6 +1170,13 @@ static struct phy_driver ksphy_driver[] = {
 	.config_init	= kszphy_config_init,
 	.config_aneg	= ksz8873mll_config_aneg,
 	.read_status	= ksz8873mll_read_status,
+	/* These interrupts are handled by the irq controller
+	 * embedded inside the KSZ8873MLL, they get unmasked when the
+	 * irq is requested and ACKed by reading the status register,
+	 * which is done by the irqchip code.
+	 */
+	.ack_interrupt	= genphy_no_ack_interrupt,
+	.config_intr	= genphy_no_config_intr,
 	.suspend	= genphy_suspend,
 	.resume		= genphy_resume,
 }, {
@@ -1178,6 +1185,13 @@ static struct phy_driver ksphy_driver[] = {
 	.name		= "Micrel KSZ886X Switch",
 	/* PHY_BASIC_FEATURES */
 	.config_init	= kszphy_config_init,
+	/* These interrupts are handled by the irq controller
+	 * embedded inside the KSZ886X, they get unmasked when the
+	 * irq is requested and ACKed by reading the status register,
+	 * which is done by the irqchip code.
+	 */
+	.ack_interrupt	= genphy_no_ack_interrupt,
+	.config_intr	= genphy_no_config_intr,
 	.suspend	= genphy_suspend,
 	.resume		= genphy_resume,
 }, {
@@ -1187,6 +1201,13 @@ static struct phy_driver ksphy_driver[] = {
 	.config_aneg	= ksz8873mll_config_aneg,
 	.read_status	= ksz8873mll_read_status,
 	.match_phy_device = ksz8795_match_phy_device,
+	/* These interrupts are handled by the irq controller
+	 * embedded inside the KSZ887X, they get unmasked when the
+	 * irq is requested and ACKed by reading the status register,
+	 * which is done by the irqchip code.
+	 */
+	.ack_interrupt	= genphy_no_ack_interrupt,
+	.config_intr	= genphy_no_config_intr,
 	.suspend	= genphy_suspend,
 	.resume		= genphy_resume,
 }, {
