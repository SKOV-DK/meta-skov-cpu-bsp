From: Juergen Borleis <jbe@pengutronix.de>
Date: Tue, 24 Nov 2015 13:54:07 +0100
Subject: [PATCH] DTS: touchcontroller: move its shared part to the common dtsi

Signed-off-by: Juergen Borleis <jbe@pengutronix.de>
---
 arch/arm/boot/dts/imx6qdl-cpu.dtsi  | 31 ++++++++++++++++++++++++++++++-
 arch/arm/boot/dts/imx6qdl-cpuA.dtsi | 32 --------------------------------
 arch/arm/boot/dts/imx6qdl-cpuB.dtsi | 31 -------------------------------
 3 files changed, 30 insertions(+), 64 deletions(-)

diff --git a/arch/arm/boot/dts/imx6qdl-cpu.dtsi b/arch/arm/boot/dts/imx6qdl-cpu.dtsi
index 83ac96404b33..60c2f49e5bed 100644
--- a/arch/arm/boot/dts/imx6qdl-cpu.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-cpu.dtsi
@@ -271,6 +271,35 @@
 	};
 };
 
+&ecspi4 {
+	fsl,spi-num-chipselects = <1>;
+	cs-gpios = <&gpio3 20 0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi4_1>;
+	status = "okay";
+
+	ads7846: ads7846@0 {
+		compatible = "ti,tsc2046";
+		reg = <0>;
+		spi-max-frequency = <1000000>;
+		vcc-supply  = <&reg_3p3v>;
+
+		ti,x-min = /bits/ 16 <800>;
+		ti,x-max = /bits/ 16 <3400>;
+		ti,y-min = /bits/ 16 <500>;
+		ti,y-max = /bits/ 16 <3400>;
+		ti,x-plate-ohms = /bits/ 16 <642>;
+		ti,y-plate-ohms = /bits/ 16 <295>;
+		ti,pressure-max = /bits/ 16 <1500>;
+		ti,vref-delay-usecs = /bits/ 16 <300>;
+		ti,debounce-max = /bits/ 16 <100>;
+		ti,debounce-tol = /bits/ 16 <(~0)>;
+		ti,debounce-rep = /bits/ 16 <8>;
+
+		linux,wakeup;
+	};
+};
+
 &fec {
 	compatible = "fsl,imx6q-fec";
 	status = "okay";
@@ -321,7 +350,6 @@
 	pinctrl_board: dol63x_grp {
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
-				MX6QDL_PAD_EIM_D20__GPIO3_IO20		0x80000000	/* TSC2046 CS */
 				MX6QDL_PAD_GPIO_5__GPIO1_IO05  		0xb0   		/* ethernet phy reset */
 				MX6QDL_PAD_EIM_D30__GPIO3_IO30 		0xb0   		/* ethernet phy interrupt */
 				MX6QDL_PAD_ENET_RX_ER__GPIO1_IO24       0x13000		/* Enet */
@@ -371,6 +399,7 @@
 				MX6QDL_PAD_EIM_D28__ECSPI4_MOSI 	0x100b1
 				MX6QDL_PAD_EIM_D22__ECSPI4_MISO 	0x100b1
 				MX6QDL_PAD_EIM_D21__ECSPI4_SCLK 	0x100b1
+				MX6QDL_PAD_EIM_D20__GPIO3_IO20		0x100b1		/* TSC2046 CS */
 			>;
 		};
 
diff --git a/arch/arm/boot/dts/imx6qdl-cpuA.dtsi b/arch/arm/boot/dts/imx6qdl-cpuA.dtsi
index 7931009bd4ef..2f8f62bac7b0 100644
--- a/arch/arm/boot/dts/imx6qdl-cpuA.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-cpuA.dtsi
@@ -11,38 +11,6 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-&ecspi4 {
-	fsl,spi-num-chipselects = <1>;
-	cs-gpios = <&gpio3 20 0>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi4_1>;
-	status = "okay";
-
-	ads7846@0 {
-		compatible = "ti,tsc2046";
-		reg = <0>;
-		spi-max-frequency = <1000000>;
-		pendown-gpio = <&gpio4 14 0>;
-		interrupt-parent = <&gpio4>;
-		interrupts = <14 IRQ_TYPE_LEVEL_LOW>;
-		vcc-supply  = <&reg_3p3v>;
-
-		ti,x-min = /bits/ 16 <800>;
-		ti,x-max = /bits/ 16 <3400>;
-		ti,y-min = /bits/ 16 <500>;
-		ti,y-max = /bits/ 16 <3400>;
-		ti,x-plate-ohms = /bits/ 16 <642>;
-		ti,y-plate-ohms = /bits/ 16 <295>;
-		ti,pressure-max = /bits/ 16 <1500>;
-		ti,vref-delay-usecs = /bits/ 16 <300>;
-		ti,debounce-max = /bits/ 16 <100>;
-		ti,debounce-tol = /bits/ 16 <(~0)>;
-		ti,debounce-rep = /bits/ 16 <8>;
-
-		linux,wakeup;
-	};
-};
-
 /* MX6QDL_PAD_ENET_RX_ER__GPIO1_IO24 is a gpio which should be high */
 &gpio1 {
 	status = "okay";
diff --git a/arch/arm/boot/dts/imx6qdl-cpuB.dtsi b/arch/arm/boot/dts/imx6qdl-cpuB.dtsi
index 82331a0d1c49..89d82d560357 100644
--- a/arch/arm/boot/dts/imx6qdl-cpuB.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-cpuB.dtsi
@@ -11,37 +11,6 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
-&ecspi4 {
-	fsl,spi-num-chipselects = <1>;
-	cs-gpios = <&gpio3 20 0>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_ecspi4_1>;
-	status = "okay";
-
-	ads7846@0 {
-		compatible = "ti,tsc2046";
-		reg = <0>;
-		spi-max-frequency = <1000000>;
-		pendown-gpio = <&gpio3 19 0>;
-		interrupt-parent = <&gpio3>;
-		interrupts = <19 IRQ_TYPE_LEVEL_LOW>;
-		vcc-supply  = <&reg_3p3v>;
-
-		ti,x-min = /bits/ 16 <800>;
-		ti,x-max = /bits/ 16 <3400>;
-		ti,y-min = /bits/ 16 <500>;
-		ti,y-max = /bits/ 16 <3400>;
-		ti,x-plate-ohms = /bits/ 16 <642>;
-		ti,y-plate-ohms = /bits/ 16 <295>;
-		ti,pressure-max = /bits/ 16 <1500>;
-		ti,vref-delay-usecs = /bits/ 16 <300>;
-		ti,debounce-max = /bits/ 16 <100>;
-		ti,debounce-tol = /bits/ 16 <(~0)>;
-		ti,debounce-rep = /bits/ 16 <8>;
-
-		linux,wakeup;
-	};
-};
 
 &pinctrl_hog {
 	fsl,pins = <
