From: Philipp Zabel <p.zabel@pengutronix.de>
Date: Mon, 6 Jul 2015 16:17:48 +0200
Subject: [PATCH] media: coda: reuse bitstream payload in coda_job_ready in
 preparation for coda_not_ready trace event

The coda_get_bitstream_payload() function is called multiple times in
coda_job_ready. Assign it to a local variable and reuse it.

Signed-off-by: Philipp Zabel <p.zabel@pengutronix.de>
---
 drivers/media/platform/coda/coda-common.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/media/platform/coda/coda-common.c b/drivers/media/platform/coda/coda-common.c
index 3d8bbb216b3c..87842aeba420 100644
--- a/drivers/media/platform/coda/coda-common.c
+++ b/drivers/media/platform/coda/coda-common.c
@@ -1389,6 +1389,7 @@ static int coda_job_ready(void *m2m_priv)
 				  CODA_BIT_STREAM_END_FLAG;
 		int num_metas = ctx->num_metas;
 		struct coda_buffer_meta *meta;
+		unsigned int payload = coda_get_bitstream_payload(ctx);
 		unsigned int count;
 
 		count = hweight32(ctx->frm_dis_flg);
